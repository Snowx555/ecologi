<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–∞—Ä—Ç–∞ —É–≥–ª–µ—Ä–æ–¥–Ω–æ–≥–æ —Å–ª–µ–¥–∞</title>
  <!-- –£–±—Ä–∞–Ω—ã –ø—Ä–æ–±–µ–ª—ã –≤ –∫–æ–Ω—Ü–µ URL -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    :root {
      --primary: #2e7d32;
      --primary-light: #4caf50;
      --primary-dark: #1b5e20;
      --bg-light: #f8fcf9;
      --card-bg: #ffffff;
      --text: #2c3e50;
      --text-light: #555;
      --shadow: 0 6px 24px rgba(0,0,0,0.08);
      --radius: 16px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      padding-bottom: 3rem;
    }

    header {
      background: linear-gradient(120deg, var(--primary), var(--primary-light));
      color: white;
      padding: 2.5rem 1.5rem;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: "";
      position: absolute;
      top: -50px;
      right: -50px;
      width: 200px;
      height: 200px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
    }

    header h1 {
      font-size: 2.6rem;
      font-weight: 800;
      margin-bottom: 0.6rem;
      position: relative;
      z-index: 2;
    }

    header p {
      font-size: 1.2rem;
      opacity: 0.95;
      max-width: 700px;
      margin: 0 auto;
      position: relative;
      z-index: 2;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    section {
      background: var(--card-bg);
      padding: 2.2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 2.8rem;
      transition: var(--transition);
    }

    section:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    h2 {
      font-size: 1.9rem;
      color: var(--primary);
      margin-bottom: 1.6rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    h2 i {
      background: rgba(46, 125, 50, 0.1);
      width: 42px;
      height: 42px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
    }

    #map {
      height: 520px;
      border-radius: 14px;
      margin: 1.2rem 0;
      border: 1px solid #e8f5e9;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.03);
    }

    .info-box, #result {
      margin-top: 1.8rem;
      padding: 1.4rem;
      background: #f0f9f2;
      border-radius: var(--radius);
      display: none;
      border-left: 4px solid var(--primary-light);
    }

    form {
      display: none;
      flex-direction: column;
      gap: 1.4rem;
      margin-top: 1.8rem;
    }

    label {
      font-weight: 600;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    input, select, button {
      padding: 0.95rem 1.1rem;
      border: 1px solid #c8e6c9;
      border-radius: 12px;
      font-size: 1rem;
      transition: var(--transition);
      width: 100%;
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.25);
    }

    button {
      background: var(--primary-light);
      color: white;
      font-weight: 600;
      cursor: pointer;
      border: none;
      font-size: 1.05rem;
      letter-spacing: 0.3px;
    }

    button:hover {
      background: var(--primary);
    }

    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
      gap: 1.8rem;
      margin-top: 1.6rem;
    }

    .tip-card {
      background: #fafafa;
      padding: 1.6rem;
      border-radius: var(--radius);
      border-top: 4px solid #a5d6a7;
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .tip-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.09);
      background: #f5fefd;
    }

    .tip-card i {
      font-size: 1.8rem;
      color: var(--primary-light);
      width: 56px;
      height: 56px;
      background: rgba(46, 125, 50, 0.08);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .tip-card h3 {
      font-size: 1.25rem;
      color: var(--primary-dark);
      font-weight: 600;
    }

    footer {
      text-align: center;
      padding: 2rem;
      color: #757575;
      font-size: 0.95rem;
      background: white;
      border-top: 1px solid #eee;
      margin-top: 1rem;
      border-radius: 16px;
    }

    /* –ü–æ–ª–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –∞—Ç—Ä–∏–±—É—Ü–∏–∏ Leaflet */
    .leaflet-control-attribution {
      display: none !important;
    }

    @media (max-width: 600px) {
      header h1 { font-size: 2rem; }
      header p { font-size: 1rem; }
      section { padding: 1.6rem; }
      #map { height: 400px; }
      h2 { font-size: 1.6rem; }
    }
  </style>
</head>
<body>

  <header>
    <h1>üåç –ö–∞—Ä—Ç–∞ —É–≥–ª–µ—Ä–æ–¥–Ω–æ–≥–æ —Å–ª–µ–¥–∞</h1>
    <p>–ü–æ–Ω–∏–º–∞–π—Ç–µ, —Å—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ –∏ —É–º–µ–Ω—å—à–∞–π—Ç–µ —Å–≤–æ—ë –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–ª–∏–º–∞—Ç ‚Äî —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –∫ —É—Å—Ç–æ–π—á–∏–≤–æ–º—É –±—É–¥—É—â–µ–º—É</p>
  </header>

  <div class="container">

    <section>
      <h2><i class="fas fa-map-marked-alt"></i> –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</h2>
      <div id="map"></div>
      <div id="country-info" class="info-box"></div>

      <form id="carbon-form">
        <label for="transport"><i class="fas fa-car"></i> –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ –Ω–µ–¥–µ–ª—é (–∫–º –Ω–∞ –∞–≤—Ç–æ):</label>
        <input type="number" id="transport" min="0" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 100">

        <label for="electricity"><i class="fas fa-bolt"></i> –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è –≤ –º–µ—Å—è—Ü (–∫–í—Ç¬∑—á):</label>
        <input type="number" id="electricity" min="0" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 300">

        <label for="diet"><i class="fas fa-leaf"></i> –¢–∏–ø –ø–∏—Ç–∞–Ω–∏—è:</label>
        <select id="diet">
          <option value="meat">–ú—è—Å–Ω–æ–π</option>
          <option value="vegetarian">–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏–π</option>
          <option value="vegan">–í–µ–≥–∞–Ω—Å–∫–∏–π</option>
        </select>

        <button type="submit"><i class="fas fa-calculator"></i> –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–æ–π —Å–ª–µ–¥</button>
      </form>
      <div id="result"></div>
    </section>

    <section>
      <h2><i class="fas fa-lightbulb"></i> –°–æ–≤–µ—Ç—ã –ø–æ —Å–Ω–∏–∂–µ–Ω–∏—é —Å–ª–µ–¥–∞</h2>
      <div class="tips-grid">
        <div class="tip-card">
          <i class="fas fa-bus"></i>
          <h3>–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</h3>
          <p>–û–¥–∏–Ω –¥–µ–Ω—å –±–µ–∑ –º–∞—à–∏–Ω—ã –≤ –Ω–µ–¥–µ–ª—é —Å–Ω–∏–∂–∞–µ—Ç –≤–∞—à —Å–ª–µ–¥ –Ω–∞ ~200 –∫–≥ CO‚ÇÇ –≤ –≥–æ–¥.</p>
        </div>
        <div class="tip-card">
          <i class="fas fa-drumstick-bite"></i>
          <h3>–ú–µ–Ω—å—à–µ –º—è—Å–∞</h3>
          <p>–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∞—è –¥–∏–µ—Ç–∞ —É–º–µ–Ω—å—à–∞–µ—Ç —Å–ª–µ–¥ –Ω–∞ 50% –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –º—è—Å–Ω–æ–π.</p>
        </div>
        <div class="tip-card">
          <i class="fas fa-lightbulb"></i>
          <h3>–≠–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏</h3>
          <p>LED-–ª–∞–º–ø—ã, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ –∏ —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–±–æ—Ä—ã ‚Äî –ø—Ä–æ—Å—Ç—ã–µ —à–∞–≥–∏ –∫ –±–æ–ª—å—à–æ–π —Ä–∞–∑–Ω–∏—Ü–µ.</p>
        </div>
        <div class="tip-card">
          <i class="fas fa-recycle"></i>
          <h3>–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h3>
          <p>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –æ—Ç–∫–∞–∑ –æ—Ç –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –∏ —Ä–µ–º–æ–Ω—Ç –≤–µ—â–µ–π —Å–Ω–∏–∂–∞—é—Ç —Å–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ.</p>
        </div>
      </div>
    </section>

  </div>

  <footer>
    <p>–î–∞–Ω–Ω—ã–µ: Our World in Data, Global Carbon Atlas | ¬© 2025 –ö–∞—Ä—Ç–∞ —É–≥–ª–µ—Ä–æ–¥–Ω–æ–≥–æ —Å–ª–µ–¥–∞</p>
  </footer>

  <!-- –£–±—Ä–∞–Ω—ã –ø—Ä–æ–±–µ–ª—ã –≤ –∫–æ–Ω—Ü–µ URL -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const countryStats = {
      "RUS": { name: "–†–æ—Å—Å–∏—è", co2Intensity: 475, perCapita: 11.9 },
      "DEU": { name: "–ì–µ—Ä–º–∞–Ω–∏—è", co2Intensity: 384, perCapita: 7.7 },
      "USA": { name: "–°–®–ê", co2Intensity: 385, perCapita: 14.4 },
      "SWE": { name: "–®–≤–µ—Ü–∏—è", co2Intensity: 15, perCapita: 3.9 },
      "FRA": { name: "–§—Ä–∞–Ω—Ü–∏—è", co2Intensity: 57, perCapita: 4.7 },
      "CHN": { name: "–ö–∏—Ç–∞–π", co2Intensity: 560, perCapita: 7.4 },
      "IND": { name: "–ò–Ω–¥–∏—è", co2Intensity: 705, perCapita: 1.9 },
      "BRA": { name: "–ë—Ä–∞–∑–∏–ª–∏—è", co2Intensity: 89, perCapita: 2.2 },
      "CAN": { name: "–ö–∞–Ω–∞–¥–∞", co2Intensity: 120, perCapita: 14.2 },
      "AUS": { name: "–ê–≤—Å—Ç—Ä–∞–ª–∏—è", co2Intensity: 670, perCapita: 15.5 }
    };

    let selectedCountryCode = null;

    const map = L.map('map', { zoomControl: true }).setView([30, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: ''
    }).addTo(map);

    const simplifiedGeoJSON = {
      "type": "FeatureCollection",
      "features": [
        { "type": "Feature", "properties": { "ISO3": "RUS" }, "geometry": { "type": "Polygon", "coordinates": [[[27,55],[142,55],[142,82],[27,82],[27,55]]] } },
        { "type": "Feature", "properties": { "ISO3": "DEU" }, "geometry": { "type": "Polygon", "coordinates": [[[6,47],[15,47],[15,55],[6,55],[6,47]]] } },
        { "type": "Feature", "properties": { "ISO3": "USA" }, "geometry": { "type": "Polygon", "coordinates": [[[-125,24],[-66,24],[-66,50],[-125,50],[-125,24]]] } },
        { "type": "Feature", "properties": { "ISO3": "SWE" }, "geometry": { "type": "Polygon", "coordinates": [[[11,55],[24,55],[24,69],[11,69],[11,55]]] } },
        { "type": "Feature", "properties": { "ISO3": "FRA" }, "geometry": { "type": "Polygon", "coordinates": [[[ -5,42],[8,42],[8,51],[-5,51],[-5,42]]] } },
        { "type": "Feature", "properties": { "ISO3": "CHN" }, "geometry": { "type": "Polygon", "coordinates": [[[73,18],[135,18],[135,54],[73,54],[73,18]]] } },
        { "type": "Feature", "properties": { "ISO3": "IND" }, "geometry": { "type": "Polygon", "coordinates": [[[68,8],[97,8],[97,37],[68,37],[68,8]]] } },
        { "type": "Feature", "properties": { "ISO3": "BRA" }, "geometry": { "type": "Polygon", "coordinates": [[[-74,-34],[-34,-34],[-34,5],[-74,5],[-74,-34]]] } },
        { "type": "Feature", "properties": { "ISO3": "CAN" }, "geometry": { "type": "Polygon", "coordinates": [[[-141,42],[-52,42],[-52,83],[-141,83],[-141,42]]] } },
        { "type": "Feature", "properties": { "ISO3": "AUS" }, "geometry": { "type": "Polygon", "coordinates": [[[113,-44],[154,-44],[154,-10],[113,-10],[113,-44]]] } }
      ]
    };

    function onCountryClick(iso3, name) {
      const stats = countryStats[iso3];
      selectedCountryCode = iso3;

      const info = document.getElementById('country-info');
      const form = document.getElementById('carbon-form');

      if (stats) {
        info.innerHTML = `
          <h3 style="color:#2e7d32; margin-bottom:0.6rem;">üìä ${stats.name}</h3>
          <p><strong>–í—ã–±—Ä–æ—Å—ã –æ—Ç —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞:</strong> ${stats.co2Intensity} –≥ CO‚ÇÇ / –∫–í—Ç¬∑—á</p>
          <p><strong>–°—Ä–µ–¥–Ω–∏–π —Å–ª–µ–¥ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞:</strong> ${(stats.perCapita * 1000 / 52).toFixed(1)} –∫–≥ CO‚ÇÇ / –Ω–µ–¥–µ–ª—è</p>
        `;
        info.style.display = 'block';
        form.style.display = 'flex';
      } else {
        info.innerHTML = `<p>–î–∞–Ω–Ω—ã–µ –¥–ª—è ${name} –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.</p>`;
        info.style.display = 'block';
        form.style.display = 'none';
      }
      document.getElementById('result').style.display = 'none';
    }

    // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ü–≤–µ—Ç, –∞ –Ω–µ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
    L.geoJSON(simplifiedGeoJSON, {
      style: { 
        fillColor: "#e8f5e9", 
        weight: 1.4, 
        opacity: 1, 
        color: "#2e7d32", // ‚Üê –±—ã–ª–æ: var(--primary) ‚Üí –∑–∞–º–µ–Ω–µ–Ω–æ
        fillOpacity: 0.45 
      },
      onEachFeature: (feature, layer) => {
        const iso3 = feature.properties.ISO3;
        const name = countryStats[iso3]?.name || "–°—Ç—Ä–∞–Ω–∞";
        layer.bindTooltip(name, { permanent: false, direction: 'auto' });
        layer.on('click', () => onCountryClick(iso3, name));
      }
    }).addTo(map);

    document.getElementById('carbon-form').addEventListener('submit', function(e) {
      e.preventDefault();
      if (!selectedCountryCode || !countryStats[selectedCountryCode]) return;

      const stats = countryStats[selectedCountryCode];
      const transport = parseFloat(document.getElementById('transport').value) || 0;
      const electricity = parseFloat(document.getElementById('electricity').value) || 0;
      const diet = document.getElementById('diet').value;

      let dietKg = diet === 'meat' ? 150 : diet === 'vegetarian' ? 80 : 50;
      const transportKg = (transport * 180) / 1000;
      const electricityKg = (electricity / 4.33) * (stats.co2Intensity / 1000);
      const total = transportKg + electricityKg + dietKg;
      const avgWeekly = (stats.perCapita * 1000) / 52;

      const res = document.getElementById('result');
      res.innerHTML = `
        <p><strong>–í–∞—à —É–≥–ª–µ—Ä–æ–¥–Ω—ã–π —Å–ª–µ–¥:</strong> ${total.toFixed(1)} –∫–≥ CO‚ÇÇ / –Ω–µ–¥–µ–ª—é</p>
        <p><strong>–°—Ä–µ–¥–Ω–∏–π –ø–æ ${stats.name}:</strong> ${avgWeekly.toFixed(1)} –∫–≥ CO‚ÇÇ / –Ω–µ–¥–µ–ª—é</p>
        <p style="margin-top: 0.7rem; font-weight: 600; ${total > avgWeekly ? 'color: #d32f2f;' : 'color: #2e7d32;'}">
          ${total > avgWeekly ? '‚ö†Ô∏è –í–∞—à —Å–ª–µ–¥ –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ' : '‚úÖ –û—Ç–ª–∏—á–Ω–æ! –í—ã –≤–Ω–æ—Å–∏—Ç–µ –≤–∫–ª–∞–¥ –≤ —É—Å—Ç–æ–π—á–∏–≤–æ–µ –±—É–¥—É—â–µ–µ'}
        </p>
      `;
      res.style.display = 'block';
    });
  </script>
</body>
</html>